<div class="file-manager-config-container">
  <!-- show path -->
  <div>
    <!-- <span *ngFor="let pathName of fullPathDisplay">
      <a (click)="onSelectPath(pathName.path, pathName.top)">{{ pathName.name }} / </a>
    </span> -->
  </div>
  <!-- Back Button -->
  <div>
    <span class="back-btn" fxLayout="row">
      <button mat-raised-button (click)="goBackButton()">Back</button>
    </span>
  </div>
  <!-- rend back button -->
  <!-- project selection box nad project details -->
  <mat-card>
    <mat-form-field appearance="outline" *ngIf="projectFlag">
      <mat-label>Select Project</mat-label>
      <mat-select placeholder="Select Project" (selectionChange)="getSingleProject($event)">
        <mat-option *ngFor="let p of projectlist" [value]="p">
          {{p.name}}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <!-- start project details -->
    <div fxLayout="row" *ngIf="projectFlag && selectedProjectData">
      <div class="flex-grow text-center">
        Details
      </div>
      <div class="flex-grow no-border">
      </div>
      <div class="flex-grow no-border text-center">
        Units
      </div>
      <div class="flex-grow text-center">
        Car Parking
      </div>
    </div>
    <div fxLayout="row" *ngIf="projectFlag && selectedProjectData; else selectProject">

      <div class="flex-grow">
        <div class="project-content">
          <div class="project-details-header">
            <img src="{{selectedProjectStatus.logoImageUrl}}" width="100%" (click)="openImageSlider(selectedProjectStatus.logoImageUrl)" />
            <div class="project-name">
              {{selectedProjectData.name}}
            </div>
          </div>
        </div>
      </div>
      <div class="flex-grow">

        <mat-form-field appearance="outline">
          <mat-label>Land Area</mat-label>
          <input matInput readonly placeholder="Land area" [value]="selectedProjectData.projectDetails.landArea">
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Carpet Area</mat-label>
          <input matInput placeholder="Carpet area" readonly [value]="selectedProjectData.projectDetails.carpetarea">
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Sale Area</mat-label>
          <input matInput placeholder="Sale Area" readonly [value]="selectedProjectData.projectDetails.saleArea">
        </mat-form-field>
      </div>
      <div class="flex-grow ">
        <mat-form-field appearance="outline" *ngFor="let units of selectedProjectData.units">
          <mat-label>{{units.bhk}}</mat-label>
          <input matInput readonly [value]="units.count">
        </mat-form-field>
      </div>
      <div class="flex-grow ">
        <mat-form-field appearance="outline" *ngFor="let carParking of selectedProjectData.carParkingArea">
          <mat-label>{{carParking.area}}</mat-label>
          <input matInput readonly [value]="carParking.count">
        </mat-form-field>
      </div>
      <ng-template #selectProject>
        * Select Project
      </ng-template>
    </div>
    <!-- end project details -->
  </mat-card>

  <!-- end project details -->
  <div fxLayout="row" class="file-details">
    <!-- <mat-card *ngIf="!selectedProjectData;else selectedProjectTemplate" class="width-100 marginTop30 text-danger text-center">
      * Select Project
    </mat-card> -->
    <ul class="side-nav-list file-icons" *ngIf="designDeptFlag" >
      <li *ngFor="let folder of iconArray" (click)="getClickedByIcon(folder)">
        <a>
          <img class="icons" src="{{ folder.iconPath }}" /><br />{{ folder.name }}
        </a>
      </li>
    </ul>
    <!-- icon for fil upload nad folder create -->
    <div class="file-list" *ngIf="tableFlag">
      <mat-card class="margin-btm-10 list-header">
        <div fxLayout="row align-item-center" class="file-list-header">
          <div class="flex-grow ">
           
          </div>
          <div class="flex-grow no-border">
          </div>
          <div class="flex-grow no-border">
          </div>
          <div class="flex-grow no-border">
          </div>
          <div class="flex-grow no-border">
          </div>
          <div class="flex-grow no-border justify-content-center">
            <mat-icon matTooltip="Create Folder" (click)="openFolderDialog()" class="hand-cursor margin-left-4">create_new_folder</mat-icon>
            <span (click)="fileInput.click()">
              <mat-icon matTooltip="Upload" class="hand-cursor margin-left-4">cloud_upload</mat-icon>
              <input #fileInput type="file" (change)="onFileInput($event)" style="display:none;" />
            </span>
          </div>
        </div>
      </mat-card>
      <div class="expansion-container">
        <!-- <spinner diameter="80" *ngIf="folderListLoading; else folderList"></spinner> -->
        <div>
          <!-- table Implemenetion -->
          <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
            <!-- name type -->
            <ng-container matColumnDef="type">
              <th mat-header-cell *matHeaderCellDef> type </th>
              <td mat-cell *matCellDef="let element"> <img src="{{getIcon(element.fileExt,element.type)}}" width="30%">
              </td>
            </ng-container>

            <!-- name Column -->
            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef> name </th>
              <td mat-cell *matCellDef="let element"> {{element.name}} </td>
            </ng-container>
            <!-- created Column -->
            <ng-container matColumnDef="createdAt">
              <th mat-header-cell *matHeaderCellDef> name </th>
              <td mat-cell *matCellDef="let element"> {{element.createdAt | date:'dd/MM/yyyy'}} </td>
            </ng-container>
            <!-- version Column -->
            <ng-container matColumnDef="version">
              <th mat-header-cell *matHeaderCellDef> version </th>
              <td mat-cell *matCellDef="let element"> {{element.version}} </td>
            </ng-container>
            <!-- logs Column -->
            <ng-container matColumnDef="logs">
              <th mat-header-cell *matHeaderCellDef> logs </th>
              <td mat-cell *matCellDef="let element" (click)="getLogs(element)">
                <mat-icon class="mt-icn">info_outline</mat-icon>
              </td>
            </ng-container>
            <!-- email Column -->
            <ng-container matColumnDef="email">
              <th mat-header-cell *matHeaderCellDef> email </th>
              <td mat-cell *matCellDef="let element" (click)="openMailDialog(element)">
                <mat-icon color="primary" class="icon-style material-icons">email</mat-icon>
              </td>
            </ng-container>
            <!-- share Column -->
            <ng-container matColumnDef="share">
              <th mat-header-cell *matHeaderCellDef> share </th>
              <td mat-cell *matCellDef="let element" (click)="openShareDialog(element)">
                <mat-icon color="primary" class="icon-style material-icons">share</mat-icon>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;" (dblclick)="recursiveCall(row)"></tr>
          </table>
          <!-- end tbale impletaion-->
        </div>
      </div>
    </div>
    <!-- end icon  -->
    <div class="file-sub-details" *ngIf="!projectFlag">

      <mat-card class="margin-btm-10">
        <div *ngIf="folderDetailsDataOption" class="flex-box">
          <img src="{{getIcon(folderDetailsDataOption.type,folderDetailsDataOption.fileExt)}}" width="35" height="35" />
          <label class="margin-5">{{folderDetailsDataOption.name}}</label>
        </div>
      </mat-card>
      <!-- file details -->
      <mat-card class="margin-btm-10">
        <div *ngIf="fileDetails">
          <app-file-config-details [folderDetailsDataOption]="fileDetails">
          </app-file-config-details>
        </div>
      </mat-card>
      <!-- end files details -->
    </div>
  </div>

</div>